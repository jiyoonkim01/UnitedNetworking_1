<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>예약 내역</title>
    <style>
        table {
            width: 100%;
            border-collapse: collapse;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
        }
        th {
            background-color: #f4f4f4;
        }
    </style>
</head>
<body>
    <h1>예약 내역</h1>

    <table>
        <thead>
            <tr>
                <th>센터 사진</th>
                <th>센터 이름</th>
                <th>강사 이름</th>
                <th>수업 날짜</th>
                <th>수업 시간</th>
                <th>취소/리뷰</th>
            </tr>
        </thead>
        <tbody>
            {% for reservation in reservations %}
            <tr>
                <td><img src="{{ reservation.center_image_url }}" alt="센터 사진" width="100" height="100"></td>
                <td>{{ reservation.center_name }}</td>
                <td>{{ reservation.class_id.teacher }}</td>
                <td>{{ reservation.class_id.date }}</td>
                <td>{{ reservation.class_id.time }}</td>
                <td>
                    {% if reservation.is_expired %}
                        <!-- 예약이 만료된 경우 리뷰 작성 버튼 표시 -->
                        <a href="{% url 'write_review' reservation.id %}">리뷰 작성</a>
                    {% else %}
                        <!-- 예약이 취소되지 않은 경우 취소 버튼 표시 -->
                        <form action="{% url 'cancel_reservation' reservation.id %}" method="POST">
                            {% csrf_token %}
                            <button type="submit">예약 취소</button>
                        </form>
                    {% endif %}
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="6">예약 내역이 없습니다.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <a href="{% url 'myPage' %}">마이페이지</a>
</body>
</html>
